// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.

"use strict";

//------------------------------------------------------------------------------
// Requirements
//------------------------------------------------------------------------------

const rule = require("../../../lib/rules/use-cached-webresource");
const RuleTester = require("eslint").RuleTester;

//------------------------------------------------------------------------------
// Helpers
//------------------------------------------------------------------------------

const ruleTester = new RuleTester();
const ruleError = { messageId: "message1" };

ruleTester.run("use-cached-webresource", rule, {
    valid: [
        "var url = '../Pages/page.html';"
    ],
    invalid: [
        // Absolute URIs
        {
            code: "var url = 'http://servername/orgname/WebResources/new_/Pages/page.html';",
            errors: [ruleError]
        },
        {
            // Web resources name may not represent of a filename
            code: "var uri = 'http://servername/orgname/WebResources/new_page';",
            errors: [ruleError]
        },
        // Relative URIs
        {
            code: "var url = '../../WebResources/new_/Pages/page.html';",
            errors: [ruleError]
        },
        {
            // Web resources name may not represent of a filename
            code: "var uri = '../../WebResources/new_page';",
            errors: [ruleError]
        },
        {
            // Web resources name in different case
            code: "var uri = '../../webresources/new_page';",
            errors: [ruleError]
        }
    ]
});
