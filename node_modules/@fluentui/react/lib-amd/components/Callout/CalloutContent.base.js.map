{"version":3,"file":"CalloutContent.base.js","sourceRoot":"../src/","sources":["components/Callout/CalloutContent.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { DirectionalHint } from '../../common/DirectionalHint';\nimport {\n  css,\n  divProperties,\n  elementContains,\n  focusFirstChild,\n  getNativeProps,\n  on,\n  shallowCompare,\n  getPropsWithDefaults,\n} from '../../Utilities';\nimport {\n  positionCallout,\n  getMaxHeight,\n  RectangleEdge,\n  positionCard,\n  getBoundsFromTargetWindow,\n} from '../../Positioning';\nimport { Popup } from '../../Popup';\nimport { classNamesFunction } from '../../Utilities';\nimport { AnimationClassNames } from '../../Styling';\nimport { useMergedRefs, useAsync, useConst, useTarget } from '@fluentui/react-hooks';\nimport type { ICalloutProps, ICalloutContentStyleProps, ICalloutContentStyles } from './Callout.types';\nimport type { Point, IRectangle } from '../../Utilities';\nimport type { ICalloutPositionedInfo, IPositionProps, IPosition } from '../../Positioning';\nimport type { Target } from '@fluentui/react-hooks';\n\nconst COMPONENT_NAME = 'CalloutContentBase';\n\nconst ANIMATIONS: { [key: number]: string | undefined } = {\n  [RectangleEdge.top]: AnimationClassNames.slideUpIn10,\n  [RectangleEdge.bottom]: AnimationClassNames.slideDownIn10,\n  [RectangleEdge.left]: AnimationClassNames.slideLeftIn10,\n  [RectangleEdge.right]: AnimationClassNames.slideRightIn10,\n};\n\nconst BEAK_ORIGIN_POSITION = { top: 0, left: 0 };\n// Microsoft Edge will overwrite inline styles if there is an animation pertaining to that style.\n// To help ensure that edge will respect the offscreen style opacity\n// filter needs to be added as an additional way to set opacity.\n// Also set pointer-events: none so that the callout will not occlude the element it is\n// going to be positioned against\nconst OFF_SCREEN_STYLE: React.CSSProperties = { opacity: 0, filter: 'opacity(0)', pointerEvents: 'none' };\n// role and role description go hand-in-hand. Both would be included by spreading getNativeProps for a basic element\n// This constant array can be used to filter these out of native props spread on callout root and apply them together on\n// calloutMain (the Popup component within the callout)\nconst ARIA_ROLE_ATTRIBUTES = ['role', 'aria-roledescription'];\n\nconst DEFAULT_PROPS = {\n  preventDismissOnLostFocus: false,\n  preventDismissOnScroll: false,\n  preventDismissOnResize: false,\n  isBeakVisible: true,\n  beakWidth: 16,\n  gapSpace: 0,\n  minPagePadding: 8,\n  directionalHint: DirectionalHint.bottomAutoEdge,\n} as const;\n\nconst getClassNames = classNamesFunction<ICalloutContentStyleProps, ICalloutContentStyles>({\n  disableCaching: true, // disabling caching because stylesProp.position mutates often\n});\n\n/**\n * (Hook) to return a function to lazily fetch the bounds of the target element for the callout.\n */\nfunction useBounds(\n  { bounds, minPagePadding = DEFAULT_PROPS.minPagePadding, target }: ICalloutProps,\n  targetRef: React.RefObject<Element | MouseEvent | Point | null>,\n  targetWindow: Window | undefined,\n) {\n  const cachedBounds = React.useRef<IRectangle | undefined>();\n\n  const getBounds = React.useCallback((): IRectangle | undefined => {\n    if (!cachedBounds.current) {\n      let currentBounds =\n        typeof bounds === 'function' ? (targetWindow ? bounds(target, targetWindow) : undefined) : bounds;\n\n      if (!currentBounds && targetWindow) {\n        currentBounds = getBoundsFromTargetWindow(targetRef.current, targetWindow);\n        currentBounds = {\n          top: currentBounds.top + minPagePadding,\n          left: currentBounds.left + minPagePadding,\n          right: currentBounds.right! - minPagePadding,\n          bottom: currentBounds.bottom! - minPagePadding,\n          width: currentBounds.width - minPagePadding * 2,\n          height: currentBounds.height - minPagePadding * 2,\n        };\n      }\n      cachedBounds.current = currentBounds;\n    }\n\n    return cachedBounds.current;\n  }, [bounds, minPagePadding, target, targetRef, targetWindow]);\n\n  return getBounds;\n}\n\n/**\n * (Hook) to return the maximum available height for the Callout to render into.\n */\nfunction useMaxHeight(\n  { beakWidth, coverTarget, directionalHint, directionalHintFixed, gapSpace, isBeakVisible, hidden }: ICalloutProps,\n  targetRef: React.RefObject<Element | MouseEvent | Point | null>,\n  getBounds: () => IRectangle | undefined,\n) {\n  const [maxHeight, setMaxHeight] = React.useState<number | undefined>();\n  const async = useAsync();\n\n  // Updating targetRef won't re-render the component, but it's recalculated (if needed) with every render\n  // If it mutates, we want to re-run the effect\n  const currentTarget = targetRef.current;\n\n  React.useEffect(() => {\n    if (!maxHeight && !hidden) {\n      if (directionalHintFixed && currentTarget) {\n        // Since the callout cannot measure it's border size it must be taken into account here. Otherwise it will\n        // overlap with the target.\n        const totalGap: number = (gapSpace ?? 0) + (isBeakVisible && beakWidth ? beakWidth : 0);\n        async.requestAnimationFrame(() => {\n          if (targetRef.current) {\n            setMaxHeight(getMaxHeight(targetRef.current, directionalHint!, totalGap, getBounds(), coverTarget));\n          }\n        });\n      } else {\n        setMaxHeight(getBounds()?.height);\n      }\n    } else if (hidden) {\n      setMaxHeight(undefined);\n    }\n  }, [\n    targetRef,\n    currentTarget,\n    gapSpace,\n    beakWidth,\n    getBounds,\n    hidden,\n    async,\n    coverTarget,\n    directionalHint,\n    directionalHintFixed,\n    isBeakVisible,\n    maxHeight,\n  ]);\n\n  return maxHeight;\n}\n\n/**\n * (Hook) to return the height offset of the callout element and updates it each frame to approach the configured\n * finalHeight.\n */\nfunction useHeightOffset({ finalHeight, hidden }: ICalloutProps, calloutElement: React.RefObject<HTMLDivElement>) {\n  const [heightOffset, setHeightOffset] = React.useState<number>(0);\n  const async = useAsync();\n  const setHeightOffsetTimer = React.useRef<number | undefined>();\n\n  const setHeightOffsetEveryFrame = React.useCallback((): void => {\n    if (calloutElement.current && finalHeight) {\n      setHeightOffsetTimer.current = async.requestAnimationFrame(() => {\n        const calloutMainElem = calloutElement.current?.lastChild as HTMLElement;\n\n        if (!calloutMainElem) {\n          return;\n        }\n\n        const cardScrollHeight: number = calloutMainElem.scrollHeight;\n        const cardCurrHeight: number = calloutMainElem.offsetHeight;\n        const scrollDiff: number = cardScrollHeight - cardCurrHeight;\n\n        setHeightOffset(currentHeightOffset => currentHeightOffset + scrollDiff);\n\n        if (calloutMainElem.offsetHeight < finalHeight) {\n          setHeightOffsetEveryFrame();\n        } else {\n          async.cancelAnimationFrame(setHeightOffsetTimer.current!, calloutElement.current);\n        }\n      }, calloutElement.current);\n    }\n  }, [async, calloutElement, finalHeight]);\n\n  React.useEffect(() => {\n    if (!hidden) {\n      setHeightOffsetEveryFrame();\n    }\n  }, [finalHeight, hidden, setHeightOffsetEveryFrame]);\n\n  return heightOffset;\n}\n\n/**\n * (Hook) to find the current position of Callout. If Callout is resized then a new position is calculated.\n */\nfunction usePositions(\n  props: ICalloutProps,\n  hostElement: React.RefObject<HTMLDivElement>,\n  calloutElement: React.RefObject<HTMLDivElement>,\n  targetRef: React.RefObject<Element | MouseEvent | Point | null>,\n  getBounds: () => IRectangle | undefined,\n) {\n  const [positions, setPositions] = React.useState<ICalloutPositionedInfo>();\n  const positionAttempts = React.useRef(0);\n  const previousTarget = React.useRef<Target>();\n  const async = useAsync();\n  const { hidden, target, finalHeight, onPositioned, directionalHint } = props;\n\n  React.useEffect(() => {\n    if (!hidden) {\n      const timerId = async.requestAnimationFrame(() => {\n        // If we expect a target element to position against, we need to wait until `targetRef.current`\n        // is resolved. Otherwise we can try to position.\n        const expectsTarget = !!target;\n\n        if (hostElement.current && calloutElement.current && (!expectsTarget || targetRef.current)) {\n          const currentProps: IPositionProps = {\n            ...props,\n            target: targetRef.current!,\n            bounds: getBounds(),\n          };\n\n          const previousPositions = previousTarget.current === target ? positions : undefined;\n\n          // If there is a finalHeight given then we assume that the user knows and will handle\n          // additional positioning adjustments so we should call positionCard\n          const newPositions: ICalloutPositionedInfo = finalHeight\n            ? positionCard(currentProps, hostElement.current, calloutElement.current, previousPositions)\n            : positionCallout(currentProps, hostElement.current, calloutElement.current, previousPositions);\n          // Set the new position only when the positions are not exists or one of the new callout positions\n          // are different. The position should not change if the position is within 2 decimal places.\n          if (\n            (!positions && newPositions) ||\n            (positions && newPositions && !arePositionsEqual(positions, newPositions) && positionAttempts.current < 5)\n          ) {\n            // We should not reposition the callout more than a few times, if it is then the content is likely resizing\n            // and we should stop trying to reposition to prevent a stack overflow.\n            positionAttempts.current++;\n            setPositions(newPositions);\n          } else if (positionAttempts.current > 0) {\n            // Only call the onPositioned callback if the callout has been re-positioned at least once.\n            positionAttempts.current = 0;\n            onPositioned?.(positions);\n          }\n        }\n      }, calloutElement.current);\n\n      return () => async.cancelAnimationFrame(timerId);\n    }\n  }, [\n    hidden,\n    directionalHint,\n    async,\n    calloutElement,\n    hostElement,\n    targetRef,\n    finalHeight,\n    getBounds,\n    onPositioned,\n    positions,\n    props,\n    target,\n  ]);\n\n  previousTarget.current = target;\n\n  return positions;\n}\n\n/**\n * (Hook) to set up behavior to automatically focus the callout when it appears, if indicated by props.\n */\nfunction useAutoFocus(\n  { hidden, setInitialFocus }: ICalloutProps,\n  positions: ICalloutPositionedInfo | undefined,\n  calloutElement: React.RefObject<HTMLDivElement>,\n) {\n  const async = useAsync();\n  const hasPositions = !!positions;\n  React.useEffect(() => {\n    if (!hidden && setInitialFocus && hasPositions && calloutElement.current) {\n      const timerId = async.requestAnimationFrame(\n        () => focusFirstChild(calloutElement.current!),\n        calloutElement.current,\n      );\n\n      return () => async.cancelAnimationFrame(timerId);\n    }\n  }, [hidden, hasPositions, async, calloutElement, setInitialFocus]);\n}\n\n/**\n * (Hook) to set up various handlers to dismiss the popup when it loses focus or the window scrolls or similar cases.\n */\nfunction useDismissHandlers(\n  {\n    hidden,\n    onDismiss,\n    // eslint-disable-next-line deprecation/deprecation\n    preventDismissOnScroll,\n    // eslint-disable-next-line deprecation/deprecation\n    preventDismissOnResize,\n    // eslint-disable-next-line deprecation/deprecation\n    preventDismissOnLostFocus,\n    dismissOnTargetClick,\n    shouldDismissOnWindowFocus,\n    preventDismissOnEvent,\n  }: ICalloutProps,\n  positions: ICalloutPositionedInfo | undefined,\n  hostElement: React.RefObject<HTMLDivElement>,\n  targetRef: React.RefObject<Element | MouseEvent | Point | null>,\n  targetWindow: Window | undefined,\n) {\n  const isMouseDownOnPopup = React.useRef(false);\n  const async = useAsync();\n\n  const mouseDownHandlers = useConst([\n    () => {\n      isMouseDownOnPopup.current = true;\n    },\n    () => {\n      isMouseDownOnPopup.current = false;\n    },\n  ] as const);\n\n  const positionsExists = !!positions;\n\n  React.useEffect(() => {\n    const dismissOnScroll = (ev: Event) => {\n      if (positionsExists && !preventDismissOnScroll) {\n        dismissOnClickOrScroll(ev);\n      }\n    };\n\n    const dismissOnResize = (ev: Event) => {\n      if (!preventDismissOnResize && !(preventDismissOnEvent && preventDismissOnEvent(ev))) {\n        onDismiss?.(ev);\n      }\n    };\n\n    const dismissOnLostFocus = (ev: Event) => {\n      if (!preventDismissOnLostFocus) {\n        dismissOnClickOrScroll(ev);\n      }\n    };\n\n    const dismissOnClickOrScroll = (ev: Event) => {\n      const target = ev.target as HTMLElement;\n      const isEventTargetOutsideCallout = hostElement.current && !elementContains(hostElement.current, target);\n\n      // If mouse is pressed down on callout but moved outside then released, don't dismiss the callout.\n      if (isEventTargetOutsideCallout && isMouseDownOnPopup.current) {\n        isMouseDownOnPopup.current = false;\n        return;\n      }\n\n      if (\n        (!targetRef.current && isEventTargetOutsideCallout) ||\n        (ev.target !== targetWindow &&\n          isEventTargetOutsideCallout &&\n          (!targetRef.current ||\n            'stopPropagation' in targetRef.current ||\n            dismissOnTargetClick ||\n            (target !== targetRef.current && !elementContains(targetRef.current as HTMLElement, target))))\n      ) {\n        if (preventDismissOnEvent && preventDismissOnEvent(ev)) {\n          return;\n        }\n        onDismiss?.(ev);\n      }\n    };\n\n    const dismissOnTargetWindowBlur = (ev: FocusEvent) => {\n      // Do nothing\n      if (!shouldDismissOnWindowFocus) {\n        return;\n      }\n\n      if (\n        ((preventDismissOnEvent && !preventDismissOnEvent(ev)) ||\n          (!preventDismissOnEvent && !preventDismissOnLostFocus)) &&\n        !targetWindow?.document.hasFocus() &&\n        ev.relatedTarget === null\n      ) {\n        onDismiss?.(ev);\n      }\n    };\n\n    // This is added so the callout will dismiss when the window is scrolled\n    // but not when something inside the callout is scrolled. The delay seems\n    // to be required to avoid React firing an async focus event in IE from\n    // the target changing focus quickly prior to rendering the callout.\n    const disposablesPromise = new Promise<() => void>(resolve => {\n      async.setTimeout(() => {\n        if (!hidden && targetWindow) {\n          const disposables = [\n            on(targetWindow, 'scroll', dismissOnScroll, true),\n            on(targetWindow, 'resize', dismissOnResize, true),\n            on(targetWindow.document.documentElement, 'focus', dismissOnLostFocus, true),\n            on(targetWindow.document.documentElement, 'click', dismissOnLostFocus, true),\n            on(targetWindow, 'blur', dismissOnTargetWindowBlur, true),\n          ];\n\n          resolve(() => {\n            disposables.forEach(dispose => dispose());\n          });\n        }\n      }, 0);\n    });\n\n    return () => {\n      disposablesPromise.then(dispose => dispose());\n    };\n  }, [\n    hidden,\n    async,\n    hostElement,\n    targetRef,\n    targetWindow,\n    onDismiss,\n    shouldDismissOnWindowFocus,\n    dismissOnTargetClick,\n    preventDismissOnLostFocus,\n    preventDismissOnResize,\n    preventDismissOnScroll,\n    positionsExists,\n    preventDismissOnEvent,\n  ]);\n\n  return mouseDownHandlers;\n}\n\nexport const CalloutContentBase: React.FunctionComponent<ICalloutProps> = React.memo(\n  React.forwardRef<HTMLDivElement, ICalloutProps>((propsWithoutDefaults, forwardedRef) => {\n    const props = getPropsWithDefaults(DEFAULT_PROPS, propsWithoutDefaults);\n\n    const {\n      styles,\n      style,\n      ariaLabel,\n      ariaDescribedBy,\n      ariaLabelledBy,\n      className,\n      isBeakVisible,\n      children,\n      beakWidth,\n      calloutWidth,\n      calloutMaxWidth,\n      calloutMinWidth,\n      doNotLayer,\n      finalHeight,\n      hideOverflow = !!finalHeight,\n      backgroundColor,\n      calloutMaxHeight,\n      onScroll,\n      // eslint-disable-next-line deprecation/deprecation\n      shouldRestoreFocus = true,\n      target,\n      hidden,\n      onLayerMounted,\n    } = props;\n\n    const hostElement = React.useRef<HTMLDivElement>(null);\n    const calloutElement = React.useRef<HTMLDivElement>(null);\n    const rootRef = useMergedRefs(hostElement, forwardedRef);\n\n    const [targetRef, targetWindow] = useTarget(props.target, calloutElement);\n    const getBounds = useBounds(props, targetRef, targetWindow);\n    const maxHeight = useMaxHeight(props, targetRef, getBounds);\n    const heightOffset = useHeightOffset(props, calloutElement);\n    const positions = usePositions(props, hostElement, calloutElement, targetRef, getBounds);\n    const [mouseDownOnPopup, mouseUpOnPopup] = useDismissHandlers(\n      props,\n      positions,\n      hostElement,\n      targetRef,\n      targetWindow,\n    );\n\n    useAutoFocus(props, positions, calloutElement);\n\n    React.useEffect(() => {\n      if (!hidden) {\n        onLayerMounted?.();\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps -- should only run if hidden changes\n    }, [hidden]);\n\n    // If there is no target window then we are likely in server side rendering and we should not render anything.\n    if (!targetWindow) {\n      return null;\n    }\n\n    const getContentMaxHeight: number | undefined = maxHeight ? maxHeight + heightOffset : undefined;\n    const contentMaxHeight: number | undefined = calloutMaxHeight || getContentMaxHeight;\n    const overflowYHidden = hideOverflow;\n\n    const beakVisible = isBeakVisible && !!target;\n    const classNames = getClassNames(styles!, {\n      theme: props.theme!,\n      className,\n      overflowYHidden: overflowYHidden,\n      calloutWidth,\n      positions,\n      beakWidth,\n      backgroundColor,\n      calloutMaxWidth,\n      calloutMinWidth,\n      doNotLayer,\n    });\n\n    const overflowStyle: React.CSSProperties = {\n      maxHeight: contentMaxHeight,\n      ...style,\n      ...(overflowYHidden && { overflowY: 'hidden' }),\n    };\n\n    const visibilityStyle: React.CSSProperties | undefined = props.hidden ? { visibility: 'hidden' } : undefined;\n    // React.CSSProperties does not understand IRawStyle, so the inline animations will need to be cast as any for now.\n    const content = (\n      <div ref={rootRef} className={classNames.container} style={visibilityStyle}>\n        <div\n          {...getNativeProps(props, divProperties, ARIA_ROLE_ATTRIBUTES)}\n          className={css(classNames.root, positions && positions.targetEdge && ANIMATIONS[positions.targetEdge!])}\n          style={positions ? positions.elementPosition : OFF_SCREEN_STYLE}\n          // Safari and Firefox on Mac OS requires this to back-stop click events so focus remains in the Callout.\n          // See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button#Clicking_and_focus\n          tabIndex={-1}\n          ref={calloutElement}\n        >\n          {beakVisible && <div className={classNames.beak} style={getBeakPosition(positions)} />}\n          {beakVisible && <div className={classNames.beakCurtain} />}\n          <Popup\n            {...getNativeProps(props, ARIA_ROLE_ATTRIBUTES)}\n            ariaDescribedBy={ariaDescribedBy}\n            ariaLabel={ariaLabel}\n            ariaLabelledBy={ariaLabelledBy}\n            className={classNames.calloutMain}\n            onDismiss={props.onDismiss}\n            onMouseDown={mouseDownOnPopup}\n            onMouseUp={mouseUpOnPopup}\n            onRestoreFocus={props.onRestoreFocus}\n            onScroll={onScroll}\n            shouldRestoreFocus={shouldRestoreFocus}\n            style={overflowStyle}\n          >\n            {children}\n          </Popup>\n        </div>\n      </div>\n    );\n\n    return content;\n  }),\n  (previousProps: ICalloutProps, nextProps: ICalloutProps) => {\n    if (!nextProps.shouldUpdateWhenHidden && previousProps.hidden && nextProps.hidden) {\n      // Do not update when hidden.\n      return true;\n    }\n    return shallowCompare(previousProps, nextProps);\n  },\n);\n\n/**\n * (Utility) to find and return the current `Callout` Beak position.\n *\n * @param positions\n */\nfunction getBeakPosition(positions?: ICalloutPositionedInfo): React.CSSProperties {\n  const beakPositionStyle: React.CSSProperties = {\n    ...positions?.beakPosition?.elementPosition,\n  };\n\n  if (!beakPositionStyle.top && !beakPositionStyle.bottom && !beakPositionStyle.left && !beakPositionStyle.right) {\n    beakPositionStyle.left = BEAK_ORIGIN_POSITION.left;\n    beakPositionStyle.top = BEAK_ORIGIN_POSITION.top;\n  }\n\n  return beakPositionStyle;\n}\n\n/**\n * (Utility) used to compare two different elementPositions to determine whether they are equal.\n *\n * @param prevElementPositions\n * @param newElementPosition\n */\nfunction arePositionsEqual(\n  prevElementPositions: ICalloutPositionedInfo,\n  newElementPosition: ICalloutPositionedInfo,\n): boolean {\n  return (\n    comparePositions(prevElementPositions.elementPosition, newElementPosition.elementPosition) &&\n    comparePositions(prevElementPositions.beakPosition.elementPosition, newElementPosition.beakPosition.elementPosition)\n  );\n}\n\n/**\n * (Utility) used in **arePositionsEqual** to compare two different elementPositions.\n *\n * @param prevElementPositions\n * @param newElementPositions\n */\nfunction comparePositions(prevElementPositions: IPosition, newElementPositions: IPosition): boolean {\n  for (const key in newElementPositions) {\n    if (newElementPositions.hasOwnProperty(key)) {\n      const oldPositionEdge = prevElementPositions[key];\n      const newPositionEdge = newElementPositions[key];\n      if (oldPositionEdge !== undefined && newPositionEdge !== undefined) {\n        if (oldPositionEdge.toFixed(2) !== newPositionEdge.toFixed(2)) {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nCalloutContentBase.displayName = COMPONENT_NAME;\n"]}